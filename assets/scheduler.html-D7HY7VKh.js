import{_ as l,c as o,a as s,b as a,d as t,e as p,o as c,r as i}from"./app-CE4jh6_n.js";const u="/blog/scheduler.assets/img.png",r="/blog/scheduler.assets/image-20220216191905877.png",d="/blog/scheduler.assets/image-20220215223336024.png",k="/blog/scheduler.assets/image-20220217085340221.png",m="/blog/scheduler.assets/2022-01-05-22-03-21-image.png",v="/blog/scheduler.assets/2022-01-05-22-07-36-image.png",b="/blog/scheduler.assets/image-20220212200323617-4667410.png",h="/blog/scheduler.assets/image-20220211105825056.png",g="/blog/scheduler.assets/image-20220210081901024.png",x="/blog/scheduler.assets/image-20220210082252183.png",f={},y={href:"https://www.cnblogs.com/Dorae/p/9357180.html",target:"_blank",rel:"noopener noreferrer"},q={href:"https://shardingsphere.apache.org/elasticjob/current/cn/overview/#elasticjob-lite",target:"_blank",rel:"noopener noreferrer"},j={href:"https://www.xuxueli.com/xxl-job/#%E3%80%8A%E5%88%86%E5%B8%83%E5%BC%8F%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E5%B9%B3%E5%8F%B0XXL-JOB%E3%80%8B",target:"_blank",rel:"noopener noreferrer"},S={href:"https://dolphinscheduler.apache.org/zh-cn/docs/latest/user_doc/About_DolphinScheduler/About_DolphinScheduler.html",target:"_blank",rel:"noopener noreferrer"},w={href:"https://dolphinscheduler.apache.org/zh-cn/user/index.html",target:"_blank",rel:"noopener noreferrer"},A={href:"https://dolphinscheduler.apache.org/zh-cn/docs/latest/user_doc/architecture/design.html",target:"_blank",rel:"noopener noreferrer"},T={href:"https://dolphinscheduler.apache.org/zh-cn/docs/latest/user_doc/guide/installation/cluster.html",target:"_blank",rel:"noopener noreferrer"},E={href:"https://dolphinscheduler.apache.org/zh-cn/development/development-environment-setup.html",target:"_blank",rel:"noopener noreferrer"},z={href:"https://baomidou.com/pages/24112f/",target:"_blank",rel:"noopener noreferrer"};function D(J,n){const e=i("ExternalLinkIcon");return c(),o("div",null,[n[25]||(n[25]=s("h2",{id:"quartz",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#quartz"},[s("span",null,"quartz")])],-1)),s("blockquote",null,[s("p",null,[n[1]||(n[1]=a("å‚è€ƒèµ„æ–™ï¼š")),s("a",y,[n[0]||(n[0]=a("QuartzåŸç†è§£å¯† - Dorae - åšå®¢å›­")),t(e)])])]),n[26]||(n[26]=p('<h3 id="æ¶æ„å›¾" tabindex="-1"><a class="header-anchor" href="#æ¶æ„å›¾"><span>æ¶æ„å›¾</span></a></h3><blockquote><p>å»ä¸­å¿ƒåŒ–è®¾è®¡ï¼Œå„ä¸ªèŠ‚ç‚¹ä¹‹é—´å¹¶æ— æ„ŸçŸ¥</p><p>é€šè¿‡ <code>mysql for update</code> é”ï¼Œä¿è¯ä»»åŠ¡ä¸é‡å¤è°ƒç”¨</p></blockquote><p><img src="'+u+'" alt="image-20150519231230428"></p><h3 id="è°ƒåº¦åŸç†" tabindex="-1"><a class="header-anchor" href="#è°ƒåº¦åŸç†"><span>è°ƒåº¦åŸç†</span></a></h3><p><strong>å¤§æ¦‚é€»è¾‘å¦‚ä¸‹ï¼š</strong></p><p><img src="'+r+`" alt="image-20220216191905877"></p><h3 id="è°ƒåº¦æºç " tabindex="-1"><a class="header-anchor" href="#è°ƒåº¦æºç "><span>è°ƒåº¦æºç </span></a></h3><blockquote><p>æ ¸å¿ƒè°ƒåº¦ç±»ï¼š<code>QuartzSchedulerThread</code></p><p>ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p></blockquote><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token comment">// è·å–å¯ç”¨çº¿ç¨‹</span></span>
<span class="line"><span class="token keyword">int</span> availThreadCount <span class="token operator">=</span> qsRsrcs<span class="token punctuation">.</span><span class="token function">getThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">blockForAvailableThreads</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è·å–å¾…æ‰§è¡Œä»»åŠ¡åˆ—è¡¨</span></span>
<span class="line">triggers <span class="token operator">=</span>qsRsrcs<span class="token punctuation">.</span></span>
<span class="line"></span>
<span class="line"><span class="token function">getJobStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span></span>
<span class="line"></span>
<span class="line"><span class="token function">acquireNextTriggers</span><span class="token punctuation">(</span></span>
<span class="line">        now <span class="token operator">+</span>idleWaitTime<span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>availThreadCount<span class="token punctuation">,</span> qsRsrcs<span class="token punctuation">.</span><span class="token function">getMaxBatchSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>qsRsrcs<span class="token punctuation">.</span></span>
<span class="line"></span>
<span class="line"><span class="token function">getBatchTimeWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// åŠ é”ï¼Œå¹¶å¾ªç¯å¤„ç†å¾…æ‰§è¡Œä»»åŠ¡,æ›´æ–°ä»»åŠ¡çš„ä¸‹æ¬¡æ‰§è¡Œæ—¶é—´</span></span>
<span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TriggerFiredResult</span><span class="token punctuation">&gt;</span></span> res <span class="token operator">=</span> qsRsrcs<span class="token punctuation">.</span><span class="token function">getJobStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">triggersFired</span><span class="token punctuation">(</span>triggers<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å¼‚æ­¥æ‰§è¡Œä»»åŠ¡</span></span>
<span class="line">qsRsrcs<span class="token punctuation">.</span></span>
<span class="line"></span>
<span class="line"><span class="token function">getThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span></span>
<span class="line"></span>
<span class="line"><span class="token function">runInThread</span><span class="token punctuation">(</span>shell<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="elastic-job" tabindex="-1"><a class="header-anchor" href="#elastic-job"><span>elastic-job</span></a></h2>`,10)),s("blockquote",null,[s("p",null,[n[3]||(n[3]=a("å‚è€ƒèµ„æ–™ï¼š")),s("a",q,[n[2]||(n[2]=a("æ¦‚è§ˆ :: ElasticJob")),t(e)])])]),n[27]||(n[27]=p(`<h3 id="æ¶æ„å›¾-1" tabindex="-1"><a class="header-anchor" href="#æ¶æ„å›¾-1"><span>æ¶æ„å›¾</span></a></h3><blockquote><ul><li>èŠ‚ç‚¹åŠŸèƒ½ï¼š</li></ul></blockquote><ul><li>æ³¨å†Œåˆ°zkï¼ˆé€šè¿‡zkåè°ƒä»»åŠ¡åˆ†é…ï¼‰</li></ul><blockquote><ul><li>ä»»åŠ¡å®šæ—¶è°ƒåº¦ï¼ˆé€šè¿‡quartzï¼‰ <ul><li>leaderé€‰ä¸¾ï¼ˆcuratoræ¡†æ¶æä¾›çš„LeaderLatchï¼Œä¸€ç§æŠ¢å çš„æ–¹å¼æ¥å†³å®šé€‰ä¸»ã€‚å„ä¸ªèŠ‚ç‚¹é€šè¿‡åœ¨zkä¸ŠæŒ‡å®šç›®å½•ä¸‹å»ºç«‹ä¸´æ—¶é¡ºåºèŠ‚ç‚¹ï¼Œç„¶åå¯¹åˆ—è¡¨è¿›è¡Œæ’åºï¼Œæ’åœ¨ç¬¬ä¸€ä¸ªå°±æ˜¯leaderï¼‰</li></ul></li></ul></blockquote><ul><li>leader è¿›è¡Œä»»åŠ¡åˆ†ç‰‡</li></ul><blockquote><ul><li>ä»»åŠ¡åˆ†ç‰‡æ‰§è¡Œ</li></ul></blockquote><ul><li>æ¯”å¦‚ A ä»»åŠ¡éœ€è¦å¤„ç†100 æ¡æ•°æ®ï¼Œä¸ºäº†å¿«é€Ÿæ‰§è¡Œï¼Œå°†ä»»åŠ¡åˆ‡åˆ†ä¸º 3 ç‰‡å¹¶è¡Œæ‰§è¡Œ <blockquote></blockquote></li><li>åˆ†ç‰‡1 å¤„ç† id % 3 ==0 çš„æ•°æ®</li></ul><blockquote><pre><code>  - åˆ†ç‰‡2 å¤„ç† id % 3 ==1 çš„æ•°æ®
  - åˆ†ç‰‡3 å¤„ç† id % 3 ==2 çš„æ•°æ®
</code></pre><ul><li>æ—¥å¿—è¾“å‡º</li><li>console æ§åˆ¶å°é¡¹ç›®ï¼Œè·å–ä»»åŠ¡æ‰§è¡Œä¿¡æ¯</li></ul></blockquote><p><img src="https://shardingsphere.apache.org/elasticjob/current/img/architecture/elasticjob_lite.png" alt="image-20220215223336024"></p><p><img src="`+d+'" alt="image-20220217085340221"></p><h3 id="è°ƒåº¦åŸç†-1" tabindex="-1"><a class="header-anchor" href="#è°ƒåº¦åŸç†-1"><span>è°ƒåº¦åŸç†</span></a></h3><p><img src="'+k+`" alt="image-20220217085340221"></p><h3 id="é›†æˆæ–¹å¼" tabindex="-1"><a class="header-anchor" href="#é›†æˆæ–¹å¼"><span>é›†æˆæ–¹å¼ï¼š</span></a></h3><h4 id="pom-xml" tabindex="-1"><a class="header-anchor" href="#pom-xml"><span>pom.xml</span></a></h4><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.shardingsphere.elasticjob<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>elasticjob-lite-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="application-yml" tabindex="-1"><a class="header-anchor" href="#application-yml"><span>application.yml</span></a></h4><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="line"><span class="token key atrule">spring</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">profiles</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev</span>
<span class="line"><span class="token key atrule">server</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">port</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>port<span class="token punctuation">:</span><span class="token number">8080</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token key atrule">elasticjob</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">regCenter</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># zkåœ°å€</span></span>
<span class="line">    <span class="token key atrule">serverLists</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">2181</span></span>
<span class="line">    <span class="token comment">#ç©ºé—´ï¼Œç›¸äº’ç‹¬ç«‹éš”ç¦»</span></span>
<span class="line">    <span class="token key atrule">namespace</span><span class="token punctuation">:</span> elasticjob<span class="token punctuation">-</span>lite<span class="token punctuation">-</span>springboot</span>
<span class="line">  <span class="token key atrule">jobs</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># jobåç§°</span></span>
<span class="line">    <span class="token key atrule">simpleJob</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token comment"># æ‰§è¡Œç±»</span></span>
<span class="line">      <span class="token key atrule">elasticJobClass</span><span class="token punctuation">:</span> org.apache.shardingsphere.elasticjob.lite.example.job.SpringBootSimpleJob</span>
<span class="line">      <span class="token comment"># å®šæ—¶è¡¨è¾¾å¼</span></span>
<span class="line">      <span class="token key atrule">cron</span><span class="token punctuation">:</span> 1/5 * * * * <span class="token punctuation">?</span></span>
<span class="line">      <span class="token comment"># æ€»åˆ†ç‰‡æ•°é‡</span></span>
<span class="line">      <span class="token key atrule">shardingTotalCount</span><span class="token punctuation">:</span> <span class="token number">3</span></span>
<span class="line">      <span class="token comment"># åˆ†ç‰‡å‚æ•°ï¼Œåˆ†ç‰‡çš„æ‰§è¡Œæ–¹æ³•ä¸­ï¼Œå¯ä»¥æ‹¿åˆ°</span></span>
<span class="line">      <span class="token key atrule">shardingItemParameters</span><span class="token punctuation">:</span> 0=Beijing<span class="token punctuation">,</span>1=Shanghai<span class="token punctuation">,</span>2=Guangzhou</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="javaä»£ç " tabindex="-1"><a class="header-anchor" href="#javaä»£ç "><span>javaä»£ç </span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Component</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBootSimpleJob</span> <span class="token keyword">implements</span> <span class="token class-name">SimpleJob</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">SpringBootSimpleJob</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Autowired</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">FooRepository</span> fooRepository<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">ShardingContext</span> shardingContext<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Item: {} | Time: {} | Thread: {} | {}&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token comment">// å½“å‰åˆ†ç‰‡å€¼</span></span>
<span class="line">                shardingContext<span class="token punctuation">.</span><span class="token function">getShardingItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;HH:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">,</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;SIMPLE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">// æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡éœ€è¦ï¼Œæ ¹æ®åˆ†ç‰‡å‚æ•°ï¼Œåšç›¸åº”çš„æ•°æ®å¤„ç†</span></span>
<span class="line">        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Foo</span><span class="token punctuation">&gt;</span></span> data <span class="token operator">=</span> fooRepository<span class="token punctuation">.</span><span class="token function">findTodoData</span><span class="token punctuation">(</span>shardingContext<span class="token punctuation">.</span><span class="token function">getShardingParameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Foo</span> each <span class="token operator">:</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            fooRepository<span class="token punctuation">.</span><span class="token function">setCompleted</span><span class="token punctuation">(</span>each<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è°ƒåº¦æºç -1" tabindex="-1"><a class="header-anchor" href="#è°ƒåº¦æºç -1"><span>è°ƒåº¦æºç </span></a></h3><blockquote><p>å› ä¸ºåº•å±‚åŸºäº<code>quartz</code>ï¼Œæ‰€ä»¥ä»»åŠ¡è§¦å‘æ ¸å¿ƒä¾æ—§æ˜¯ï¼š<code>QuartzSchedulerThread</code></p><p>å¯¹æ¥åº•å±‚<code>quartz</code>çš„jobæ‰§è¡Œç±»ä¸ºï¼š<code>LiteJob.class</code></p><p>æ¶‰åŠç±»è¿‡å¤šï¼Œæ­¤å¤„ä»…å±•ç¤ºè°ƒç”¨å…³é”®æµç¨‹ï¼Œç»†èŠ‚å¯æŸ¥çœ‹å…·ä½“æºç </p></blockquote><img src="`+m+'" title="" alt="" width="742"><h2 id="xxl-job" tabindex="-1"><a class="header-anchor" href="#xxl-job"><span>xxl-job</span></a></h2><blockquote></blockquote>',24)),s("p",null,[n[5]||(n[5]=a("å‚è€ƒèµ„æ–™ï¼š")),s("a",j,[n[4]||(n[4]=a("åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦å¹³å°XXL-JOB")),t(e)])]),n[28]||(n[28]=p('<h3 id="æ¶æ„å›¾-2" tabindex="-1"><a class="header-anchor" href="#æ¶æ„å›¾-2"><span>æ¶æ„å›¾</span></a></h3><blockquote><ul><li>è°ƒåº¦å™¨ã€æ‰§è¡Œå™¨ åˆ†ç¦»ï¼Œå»ä¸­å¿ƒåŒ–ï¼Œå¯åŠ¨æ€ä¼¸ç¼©</li><li>æ•°æ®ä¸­å¿ƒï¼šè¡¨ç¤ºç³»ç»Ÿä¸­ä¼šæ¶µç›–çš„æ‰€æœ‰æ•°æ®ä¿¡æ¯</li></ul></blockquote><p><img src="https://www.xuxueli.com/doc/static/xxl-job/images/img_Qohm.png" alt="image-img_Qohm.png"></p><h3 id="è°ƒåº¦åŸç†-2" tabindex="-1"><a class="header-anchor" href="#è°ƒåº¦åŸç†-2"><span>è°ƒåº¦åŸç†</span></a></h3><p><img src="'+v+`" alt="image-20220217085340221"></p><h3 id="é›†æˆæ–¹å¼-1" tabindex="-1"><a class="header-anchor" href="#é›†æˆæ–¹å¼-1"><span>é›†æˆæ–¹å¼</span></a></h3><h4 id="admin" tabindex="-1"><a class="header-anchor" href="#admin"><span>admin</span></a></h4><blockquote><p>ä¿®æ”¹æ•°æ®åº“é…ç½®ï¼Œç›´æ¥å¯åŠ¨</p></blockquote><h4 id="executor" tabindex="-1"><a class="header-anchor" href="#executor"><span>executor</span></a></h4><h5 id="pom-xml-1" tabindex="-1"><a class="header-anchor" href="#pom-xml-1"><span>pom.xml</span></a></h5><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="line"><span class="token comment">&lt;!-- xxl-job-core --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.xuxueli<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>xxl-job-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${project.parent.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="application-properties" tabindex="-1"><a class="header-anchor" href="#application-properties"><span>application.properties</span></a></h5><div class="language-properties line-numbers-mode" data-highlighter="prismjs" data-ext="properties" data-title="properties"><pre class="language-properties"><code><span class="line"><span class="token comment">### xxl-job admin address list, such as &quot;http://address&quot; or &quot;http://address01,http://address02&quot;</span></span>
<span class="line"><span class="token key attr-name">xxl.job.admin.addresses</span><span class="token punctuation">=</span><span class="token value attr-value">http://127.0.0.1:8081/xxl-job-admin,http://127.0.0.1:8079/xxl-job-admin</span></span>
<span class="line"><span class="token comment">### æ³¨å†Œçš„æŸä¸ªåº”ç”¨ä¸‹</span></span>
<span class="line"><span class="token key attr-name">xxl.job.executor.appname</span><span class="token punctuation">=</span><span class="token value attr-value">xxl-job-executor-sample</span></span>
<span class="line"><span class="token comment">### å’Œadminäº¤äº’çš„ç«¯å£</span></span>
<span class="line"><span class="token key attr-name">xxl.job.executor.port</span><span class="token punctuation">=</span><span class="token value attr-value">9999</span></span>
<span class="line"><span class="token comment">### xxl-job executor log-path</span></span>
<span class="line"><span class="token key attr-name">xxl.job.executor.logpath</span><span class="token punctuation">=</span><span class="token value attr-value">./data/applogs/xxl-job/jobhandler</span></span>
<span class="line"><span class="token comment">### xxl-job executor log-retention-days</span></span>
<span class="line"><span class="token key attr-name">xxl.job.executor.logretentiondays</span><span class="token punctuation">=</span><span class="token value attr-value">30</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="javaä»£ç -1" tabindex="-1"><a class="header-anchor" href="#javaä»£ç -1"><span>javaä»£ç </span></a></h5><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * xxl job é…ç½®</span>
<span class="line"> */</span></span>
<span class="line"><span class="token annotation punctuation">@Configuration</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XxlJobConfig</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">XxlJobConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${xxl.job.admin.addresses}&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> adminAddresses<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${xxl.job.accessToken}&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> accessToken<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${xxl.job.executor.appname}&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> appname<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${xxl.job.executor.address}&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${xxl.job.executor.ip}&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> ip<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${xxl.job.executor.port}&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">int</span> port<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${xxl.job.executor.logpath}&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> logPath<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${xxl.job.executor.logretentiondays}&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">int</span> logRetentionDays<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Bean</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">XxlJobSpringExecutor</span> <span class="token function">xxlJobExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; xxl-job config init.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">XxlJobSpringExecutor</span> xxlJobSpringExecutor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XxlJobSpringExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        xxlJobSpringExecutor<span class="token punctuation">.</span><span class="token function">setAdminAddresses</span><span class="token punctuation">(</span>adminAddresses<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        xxlJobSpringExecutor<span class="token punctuation">.</span><span class="token function">setAppname</span><span class="token punctuation">(</span>appname<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        xxlJobSpringExecutor<span class="token punctuation">.</span><span class="token function">setAddress</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        xxlJobSpringExecutor<span class="token punctuation">.</span><span class="token function">setIp</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        xxlJobSpringExecutor<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        xxlJobSpringExecutor<span class="token punctuation">.</span><span class="token function">setAccessToken</span><span class="token punctuation">(</span>accessToken<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        xxlJobSpringExecutor<span class="token punctuation">.</span><span class="token function">setLogPath</span><span class="token punctuation">(</span>logPath<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        xxlJobSpringExecutor<span class="token punctuation">.</span><span class="token function">setLogRetentionDays</span><span class="token punctuation">(</span>logRetentionDays<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> xxlJobSpringExecutor<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Slf4j</span></span>
<span class="line"><span class="token annotation punctuation">@Component</span></span>
<span class="line"><span class="token annotation punctuation">@RequiredArgsConstructor</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SampleXxlJob</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">     * 1ã€ç®€å•ä»»åŠ¡ç¤ºä¾‹ï¼ˆBeanæ¨¡å¼ï¼‰</span>
<span class="line">     */</span></span>
<span class="line">    <span class="token annotation punctuation">@XxlJob</span><span class="token punctuation">(</span><span class="token string">&quot;demoJobHandler&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demoJobHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span></span>
<span class="line">        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;===============&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">// String forObject1 = restTemplate.getForObject(&quot;http://ADT-CAMPAIGN-PORTAL-METADATA-TEST/rest/dataAnalysisTask.json/get/897eb7c0-61a6-4b76-90eb-db9e23cdcc2e?id=90&quot;, String.class);</span></span>
<span class="line">        <span class="token comment">// System.out.println(forObject1);</span></span>
<span class="line">        <span class="token comment">//</span></span>
<span class="line">        <span class="token comment">// String url = XxlJobHelper.getJobParam();</span></span>
<span class="line">        <span class="token comment">// log.info(&quot;******====={}&quot;, url);</span></span>
<span class="line">        <span class="token comment">// XxlJobHelper.log(&quot;XXL-JOB, Hello World.&quot;);</span></span>
<span class="line">        <span class="token comment">// Assert.notNull(url, &quot;url ä¸èƒ½ä¸ºç©º&quot;);</span></span>
<span class="line">        <span class="token comment">// String forObject = restTemplate.getForObject(url, String.class);</span></span>
<span class="line">        <span class="token comment">// log.info(forObject);</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="admin-è°ƒåº¦æºç " tabindex="-1"><a class="header-anchor" href="#admin-è°ƒåº¦æºç "><span>Admin è°ƒåº¦æºç </span></a></h3><blockquote><p>æ ¸å¿ƒè°ƒåº¦ç±»ï¼š<code>JobScheduleHelper</code></p><p>ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p></blockquote><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token comment">// è·å–æ•°æ®åº“ğŸ”</span></span>
<span class="line">preparedStatement <span class="token operator">=</span>conn<span class="token punctuation">.</span></span>
<span class="line"></span>
<span class="line"><span class="token function">prepareStatement</span><span class="token punctuation">(</span>  <span class="token string">&quot;select * from xxl_job_lock where lock_name = &#39;schedule_lock&#39; for update&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æŸ¥è¯¢ä¸‹æ¬¡æ‰§è¡Œäº‹ä»¶ &lt;= æœªæ¥5sçš„æ—¶é—´</span></span>
<span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">XxlJobInfo</span><span class="token punctuation">&gt;</span></span> scheduleList <span class="token operator">=</span> <span class="token class-name">XxlJobAdminConfig</span><span class="token punctuation">.</span><span class="token function">getAdminConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getXxlJobInfoDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scheduleJobQuery</span><span class="token punctuation">(</span>nowTime <span class="token operator">+</span> <span class="token constant">PRE_READ_MS</span><span class="token punctuation">,</span> preReadCount<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è§¦å‘ä»»åŠ¡æ‰§è¡Œ</span></span>
<span class="line"><span class="token class-name">JobTriggerPoolHelper</span><span class="token punctuation">.</span></span>
<span class="line"></span>
<span class="line"><span class="token function">trigger</span><span class="token punctuation">(</span>jobInfo<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token class-name">TriggerTypeEnum</span><span class="token punctuation">.</span><span class="token constant">CRON</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æ›´æ–°ä¸‹æ¬¡æ‰§è¡Œæ—¶é—´</span></span>
<span class="line"><span class="token function">refreshNextValidTime</span><span class="token punctuation">(</span>jobInfo<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æäº¤äº‹åŠ¡ï¼Œé‡Šæ”¾ğŸ”</span></span>
<span class="line">        conn<span class="token punctuation">.</span></span>
<span class="line"></span>
<span class="line"><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="dolphinscheduler" tabindex="-1"><a class="header-anchor" href="#dolphinscheduler"><span>DolphinScheduler</span></a></h2><blockquote></blockquote>`,20)),s("p",null,[n[7]||(n[7]=a("å‚è€ƒèµ„æ–™ï¼š")),s("a",S,[n[6]||(n[6]=a("è°ƒåº¦æ¡†æ¶dolphinscheduler")),t(e)])]),n[29]||(n[29]=p('<blockquote><p>æ›´è´´åˆå¤§æ•°æ®çš„åˆ†å¸ƒå¼è°ƒåº¦æ¡†æ¶</p></blockquote><h3 id="ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#ç®€ä»‹"><span>ç®€ä»‹</span></a></h3><h4 id="å…³äºdolphinscheduler" tabindex="-1"><a class="header-anchor" href="#å…³äºdolphinscheduler"><span>å…³äºDolphinScheduler</span></a></h4><blockquote><p>Apache é¡¶çº§å¼€æºé¡¹ç›®ï¼ŒDolphinScheduleræ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ˜“æ‰©å±•çš„å¯è§†åŒ–DAGå·¥ä½œæµä»»åŠ¡è°ƒåº¦å¼€æºç³»ç»Ÿã€‚è§£å†³æ•°æ®ç ”å‘ETL é”™ç»¼å¤æ‚çš„ä¾èµ–å…³ç³»ï¼Œä¸èƒ½ç›´è§‚ç›‘æ§ä»»åŠ¡å¥åº·çŠ¶æ€ç­‰é—®é¢˜ã€‚DolphinSchedulerä»¥DAGæµå¼çš„æ–¹å¼å°†Taskç»„è£…èµ·æ¥ï¼Œå¯å®æ—¶ç›‘æ§ä»»åŠ¡çš„è¿è¡ŒçŠ¶æ€ï¼ŒåŒæ—¶æ”¯æŒé‡è¯•ã€ä»æŒ‡å®šèŠ‚ç‚¹æ¢å¤å¤±è´¥ã€æš‚åœåŠKillä»»åŠ¡ç­‰æ“ä½œ</p><p><strong>DAGï¼š</strong> æœ‰å‘æ— ç¯å›¾ã€‚å·¥ä½œæµä¸­çš„Taskä»»åŠ¡ä»¥æœ‰å‘æ— ç¯å›¾çš„å½¢å¼ç»„è£…èµ·æ¥ï¼Œä»å…¥åº¦ä¸ºé›¶çš„èŠ‚ç‚¹è¿›è¡Œæ‹“æ‰‘éå†ï¼Œç›´åˆ°æ— åç»§èŠ‚ç‚¹ä¸ºæ­¢ã€‚ä¸¾ä¾‹å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://dolphinscheduler.apache.org/img/dag_examples_cn.jpg" alt="dagç¤ºä¾‹"></p></blockquote><h4 id="ç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#ç‰¹æ€§"><span>ç‰¹æ€§ï¼š</span></a></h4><h5 id="ç®€å•æ˜“ç”¨" tabindex="-1"><a class="header-anchor" href="#ç®€å•æ˜“ç”¨"><span>ç®€å•æ˜“ç”¨</span></a></h5><blockquote><p>DAGç›‘æ§ç•Œé¢ï¼Œæ‰€æœ‰æµç¨‹å®šä¹‰éƒ½æ˜¯å¯è§†åŒ–ï¼Œé€šè¿‡æ‹–æ‹½ä»»åŠ¡å®šåˆ¶DAGï¼Œé€šè¿‡APIæ–¹å¼ä¸ç¬¬ä¸‰æ–¹ç³»ç»Ÿå¯¹æ¥, ä¸€é”®éƒ¨ç½²</p></blockquote><h5 id="é«˜å¯é æ€§" tabindex="-1"><a class="header-anchor" href="#é«˜å¯é æ€§"><span>é«˜å¯é æ€§</span></a></h5><blockquote><p>å»ä¸­å¿ƒåŒ–çš„å¤šMasterå’Œå¤šWorker, è‡ªèº«æ”¯æŒHAåŠŸèƒ½, é‡‡ç”¨ä»»åŠ¡é˜Ÿåˆ—æ¥é¿å…è¿‡è½½ï¼Œä¸ä¼šé€ æˆæœºå™¨å¡æ­»</p></blockquote><h5 id="ä¸°å¯Œçš„ä½¿ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#ä¸°å¯Œçš„ä½¿ç”¨åœºæ™¯"><span>ä¸°å¯Œçš„ä½¿ç”¨åœºæ™¯</span></a></h5><blockquote><p>æ”¯æŒæš‚åœæ¢å¤æ“ä½œ.æ”¯æŒå¤šç§Ÿæˆ·ï¼Œæ›´å¥½çš„åº”å¯¹å¤§æ•°æ®çš„ä½¿ç”¨åœºæ™¯. æ”¯æŒæ›´å¤šçš„ä»»åŠ¡ç±»å‹ï¼Œå¦‚ spark,flink, hive, mr, python, sub_process, shell</p></blockquote><h5 id="é«˜æ‰©å±•æ€§" tabindex="-1"><a class="header-anchor" href="#é«˜æ‰©å±•æ€§"><span>é«˜æ‰©å±•æ€§</span></a></h5><blockquote><p>æ”¯æŒè‡ªå®šä¹‰ä»»åŠ¡ç±»å‹ï¼Œè°ƒåº¦å™¨ä½¿ç”¨åˆ†å¸ƒå¼è°ƒåº¦ï¼Œè°ƒåº¦èƒ½åŠ›éšé›†ç¾¤çº¿æ€§å¢é•¿ï¼ŒMasterå’ŒWorkeræ”¯æŒåŠ¨æ€ä¸Šä¸‹çº¿</p></blockquote><h4 id="ç”¨æˆ·" tabindex="-1"><a class="header-anchor" href="#ç”¨æˆ·"><span>ç”¨æˆ·</span></a></h4>',14)),s("blockquote",null,[s("p",null,[s("a",w,[n[8]||(n[8]=a("ä¿¡æ¯æ¥æº")),t(e)])])]),n[30]||(n[30]=p('<p><img src="'+b+'" alt="image-20220212200323617"></p><h3 id="åŠŸèƒ½ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#åŠŸèƒ½ä»‹ç»"><span>åŠŸèƒ½ä»‹ç»</span></a></h3><h4 id="åè¯è§£é‡Š" tabindex="-1"><a class="header-anchor" href="#åè¯è§£é‡Š"><span>åè¯è§£é‡Šï¼š</span></a></h4><ul><li><strong>æµç¨‹å®šä¹‰</strong>ï¼šé€šè¿‡æ‹–æ‹½ä»»åŠ¡èŠ‚ç‚¹å¹¶å»ºç«‹ä»»åŠ¡èŠ‚ç‚¹çš„å…³è”æ‰€å½¢æˆçš„å¯è§†åŒ–<strong>DAG</strong></li><li><strong>æµç¨‹å®ä¾‹</strong>ï¼šæµç¨‹å®ä¾‹æ˜¯æµç¨‹å®šä¹‰çš„å®ä¾‹åŒ–ï¼Œå¯ä»¥é€šè¿‡æ‰‹åŠ¨å¯åŠ¨æˆ–å®šæ—¶è°ƒåº¦ç”Ÿæˆ,æµç¨‹å®šä¹‰æ¯è¿è¡Œä¸€æ¬¡ï¼Œäº§ç”Ÿä¸€ä¸ªæµç¨‹å®ä¾‹</li><li><strong>ä»»åŠ¡å®ä¾‹</strong>ï¼šä»»åŠ¡å®ä¾‹æ˜¯æµç¨‹å®šä¹‰ä¸­ä»»åŠ¡èŠ‚ç‚¹çš„å®ä¾‹åŒ–ï¼Œæ ‡è¯†ç€å…·ä½“çš„ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€</li><li><strong>ä»»åŠ¡ç±»å‹</strong>ï¼šç›®å‰æ”¯æŒæœ‰SHELLã€SQLã€SUB_PROCESS(å­æµç¨‹)ã€PROCEDUREã€MRã€SPARKã€PYTHONã€DEPENDENT(ä¾èµ–)ã€ï¼ŒåŒæ—¶è®¡åˆ’æ”¯æŒåŠ¨æ€æ’ä»¶æ‰©å±•ï¼Œæ³¨æ„ï¼šå…¶ä¸­å­ <strong>SUB_PROCESS</strong> ä¹Ÿæ˜¯ä¸€ä¸ªå•ç‹¬çš„æµç¨‹å®šä¹‰ï¼Œæ˜¯å¯ä»¥å•ç‹¬å¯åŠ¨æ‰§è¡Œçš„</li><li><strong>è°ƒåº¦æ–¹å¼</strong>ï¼šç³»ç»Ÿæ”¯æŒåŸºäºcronè¡¨è¾¾å¼çš„å®šæ—¶è°ƒåº¦å’Œæ‰‹åŠ¨è°ƒåº¦ã€‚å‘½ä»¤ç±»å‹æ”¯æŒï¼šå¯åŠ¨å·¥ä½œæµã€ä»å½“å‰èŠ‚ç‚¹å¼€å§‹æ‰§è¡Œã€æ¢å¤è¢«å®¹é”™çš„å·¥ä½œæµã€æ¢å¤æš‚åœæµç¨‹ã€ä»å¤±è´¥èŠ‚ç‚¹å¼€å§‹æ‰§è¡Œã€è¡¥æ•°ã€å®šæ—¶ã€é‡è·‘ã€æš‚åœã€åœæ­¢ã€æ¢å¤ç­‰å¾…çº¿ç¨‹ã€‚ å…¶ä¸­ <strong>æ¢å¤è¢«å®¹é”™çš„å·¥ä½œæµ</strong> å’Œ <strong>æ¢å¤ç­‰å¾…çº¿ç¨‹</strong> ä¸¤ç§å‘½ä»¤ç±»å‹æ˜¯ç”±è°ƒåº¦å†…éƒ¨æ§åˆ¶ä½¿ç”¨ï¼Œå¤–éƒ¨æ— æ³•è°ƒç”¨</li><li><strong>å®šæ—¶è°ƒåº¦</strong>ï¼šç³»ç»Ÿé‡‡ç”¨ <strong>quartz</strong> åˆ†å¸ƒå¼è°ƒåº¦å™¨ï¼Œå¹¶åŒæ—¶æ”¯æŒcronè¡¨è¾¾å¼å¯è§†åŒ–çš„ç”Ÿæˆ</li><li><strong>ä¾èµ–</strong>ï¼šç³»ç»Ÿä¸å•å•æ”¯æŒ <strong>DAG</strong> ç®€å•çš„å‰é©±å’Œåç»§èŠ‚ç‚¹ä¹‹é—´çš„ä¾èµ–ï¼ŒåŒæ—¶è¿˜æä¾›<strong>ä»»åŠ¡ä¾èµ–</strong>èŠ‚ç‚¹ï¼Œæ”¯æŒ**æµç¨‹é—´çš„è‡ªå®šä¹‰ä»»åŠ¡ä¾èµ– **</li><li><strong>ä¼˜å…ˆçº§</strong> ï¼šæ”¯æŒæµç¨‹å®ä¾‹å’Œä»»åŠ¡å®ä¾‹çš„ä¼˜å…ˆçº§ï¼Œå¦‚æœæµç¨‹å®ä¾‹å’Œä»»åŠ¡å®ä¾‹çš„ä¼˜å…ˆçº§ä¸è®¾ç½®ï¼Œåˆ™é»˜è®¤æ˜¯å…ˆè¿›å…ˆå‡º</li><li><strong>é‚®ä»¶å‘Šè­¦</strong>ï¼šæ”¯æŒ <strong>SQLä»»åŠ¡</strong> æŸ¥è¯¢ç»“æœé‚®ä»¶å‘é€ï¼Œæµç¨‹å®ä¾‹è¿è¡Œç»“æœé‚®ä»¶å‘Šè­¦åŠå®¹é”™å‘Šè­¦é€šçŸ¥</li><li><strong>å¤±è´¥ç­–ç•¥</strong>ï¼šå¯¹äºå¹¶è¡Œè¿è¡Œçš„ä»»åŠ¡ï¼Œå¦‚æœæœ‰ä»»åŠ¡å¤±è´¥ï¼Œæä¾›ä¸¤ç§å¤±è´¥ç­–ç•¥å¤„ç†æ–¹å¼ï¼Œ<strong>ç»§ç»­</strong>æ˜¯æŒ‡ä¸ç®¡å¹¶è¡Œè¿è¡Œä»»åŠ¡çš„çŠ¶æ€ï¼Œç›´åˆ°æµç¨‹å¤±è´¥ç»“æŸã€‚ <strong>ç»“æŸ</strong>æ˜¯æŒ‡ä¸€æ—¦å‘ç°å¤±è´¥ä»»åŠ¡ï¼Œåˆ™åŒæ—¶Killæ‰æ­£åœ¨è¿è¡Œçš„å¹¶è¡Œä»»åŠ¡ï¼Œæµç¨‹å¤±è´¥ç»“æŸ</li><li><strong>è¡¥æ•°</strong>ï¼šè¡¥å†å²æ•°æ®ï¼Œæ”¯æŒ<strong>åŒºé—´å¹¶è¡Œå’Œä¸²è¡Œ</strong>ä¸¤ç§è¡¥æ•°æ–¹å¼</li></ul><blockquote><p>Spark ä»»åŠ¡æ—¥å¿—ï¼š</p><p><img src="'+h+'" alt="image-20220211105825056"></p></blockquote><h3 id="æ¶æ„è®¾è®¡" tabindex="-1"><a class="header-anchor" href="#æ¶æ„è®¾è®¡"><span>æ¶æ„è®¾è®¡</span></a></h3>',6)),s("blockquote",null,[s("p",null,[n[10]||(n[10]=a("å‚è€ƒèµ„æ–™ï¼š")),s("a",A,[n[9]||(n[9]=a("æ¶æ„è®¾è®¡")),t(e)])]),n[11]||(n[11]=s("p",null,[s("strong",null,"å»ä¸­å¿ƒåŒ–è®¾è®¡")],-1))]),n[31]||(n[31]=p(`<p><img src="https://dolphinscheduler.apache.org/img/architecture-1.3.0.jpg" alt="img"></p><h4 id="æ¨¡å—åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#æ¨¡å—åŠŸèƒ½"><span>æ¨¡å—åŠŸèƒ½</span></a></h4><p><img src="https://dolphinscheduler.apache.org/img/master-process-2.0-zh_cn.png" alt="Start process activity diagram"></p><h5 id="api" tabindex="-1"><a class="header-anchor" href="#api"><span>API</span></a></h5><blockquote><p>å‚è€ƒèµ„æ–™ï¼šhttps://dolphinscheduler.apache.org/zh-cn/docs/latest/user_doc/guide/open-api.html</p><ul><li><p>è´Ÿè´£å…ƒæ•°æ®çš„ç®¡ç†</p></li><li><p>apiè°ƒç”¨æ–¹å¼</p></li></ul></blockquote><h5 id="masterserver" tabindex="-1"><a class="header-anchor" href="#masterserver"><span>MasterServer</span></a></h5><blockquote><ul><li>MasterServeré‡‡ç”¨åˆ†å¸ƒå¼æ— ä¸­å¿ƒè®¾è®¡ç†å¿µ</li><li>æ ¹æ®å·¥ä½œæµå…ƒæ•°æ®ï¼Œè´Ÿè´£ DAG ä»»åŠ¡åˆ‡åˆ†ï¼Œè§¦å‘ä»»åŠ¡è°ƒåº¦ï¼Œä»»åŠ¡æ‰§è¡Œç›‘æ§</li><li>ç›‘å¬zkä¸­æ³¨å†Œçš„ <code>MasterServer</code> å’Œ <code>WorkerServer</code>èŠ‚ç‚¹</li><li>æ ¹æ®zkä¸­è®°å½•çš„ <code>WorkerServer</code>èŠ‚ç‚¹ä¿¡æ¯ï¼ŒæŒ‰è·¯ç”±ç­–ç•¥ï¼Œé€‰æ‹©<code>WorkerServer</code>ï¼Œé€šè¿‡<code>Netty</code>å‘é€è°ƒåº¦ä¿¡æ¯</li><li>æ ¹æ®<code>WorkerServer</code> è¿”å›çš„æ‰§è¡ŒçŠ¶æ€ä¿¡æ¯ï¼Œæ›´æ–°ä»»åŠ¡çš„çŠ¶æ€</li></ul><h6 id="åŒ…å«æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#åŒ…å«æœåŠ¡"><span>åŒ…å«æœåŠ¡:</span></a></h6><ul><li><strong>Quartz</strong>åˆ†å¸ƒå¼è°ƒåº¦ç»„ä»¶ï¼Œä¸»è¦è´Ÿè´£å®šæ—¶ä»»åŠ¡çš„å¯åœæ“ä½œï¼Œå½“quartzè°ƒèµ·ä»»åŠ¡åï¼ŒMasterå†…éƒ¨ä¼šæœ‰çº¿ç¨‹æ± å…·ä½“è´Ÿè´£å¤„ç†ä»»åŠ¡çš„åç»­æ“ä½œ</li><li><strong>MasterRegistryClient</strong> æ³¨å†Œåˆ°zkä¸­ï¼Œå¹¶ç›‘å¬workerã€master æ³¨å†Œçš„ç›®å½•</li><li><strong>MasterSchedulerService</strong>æ˜¯ä¸€ä¸ªæ‰«æçº¿ç¨‹ï¼Œå®šæ—¶æ‰«ææ•°æ®åº“ä¸­çš„ <strong>command</strong> è¡¨ï¼Œç”Ÿæˆå·¥ä½œæµå®ä¾‹ï¼Œæ ¹æ®ä¸åŒçš„<strong>å‘½ä»¤ç±»å‹</strong> è¿›è¡Œä¸åŒçš„ä¸šåŠ¡æ“ä½œ</li><li><strong>WorkflowExecuteThread</strong>ä¸»è¦æ˜¯è´Ÿè´£DAGä»»åŠ¡åˆ‡åˆ†ã€ä»»åŠ¡æäº¤ã€å„ç§ä¸åŒå‘½ä»¤ç±»å‹çš„é€»è¾‘å¤„ç†ï¼Œå¤„ç†ä»»åŠ¡çŠ¶æ€å’Œå·¥ä½œæµçŠ¶æ€äº‹ä»¶</li><li><strong>EventExecuteService</strong>å¤„ç†masterè´Ÿè´£çš„å·¥ä½œæµå®ä¾‹æ‰€æœ‰çš„çŠ¶æ€å˜åŒ–äº‹ä»¶ï¼Œä½¿ç”¨çº¿ç¨‹æ± å¤„ç†å·¥ä½œæµçš„çŠ¶æ€äº‹ä»¶</li><li><strong>StateWheelExecuteThread</strong>å¤„ç†ä¾èµ–ä»»åŠ¡å’Œè¶…æ—¶ä»»åŠ¡çš„å®šæ—¶çŠ¶æ€æ›´æ–°</li><li><strong>FailoverExecuteThread</strong> ä»»åŠ¡å®¹é”™å¤„ç†</li></ul><p><strong>æºç è§£æ</strong></p><p><strong>å…¥å£æ–¹æ³•ï¼š</strong><code>org.apache.dolphinscheduler.server.master.MasterServer#run</code></p><p>springBoot å¯åŠ¨å®Œæˆåï¼Œåˆ©ç”¨äº‹ä»¶å‘å¸ƒæœºåˆ¶ï¼Œè°ƒç”¨æ­¤æ–¹æ³•</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token comment">// ä¸‹é¢ä»…åˆ—å‡ºå…³é”®æ‰§è¡Œæ–¹æ³•</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å¯åŠ¨ NettyServerï¼Œç”¨äºå’Œ WorkerServer äº¤äº’</span></span>
<span class="line"><span class="token keyword">this</span><span class="token punctuation">.</span>nettyRemotingServer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æ³¨å†Œåˆ°zkï¼Œå¹¶ç›‘å¬ zk ä¸­çš„ /nodes/ ç›®å½•ï¼Œå½“workerã€masterå‘ç”Ÿå˜åŒ–æ—¶ï¼ŒåŒæ­¥åˆ°å†…å­˜ä¸­</span></span>
<span class="line"><span class="token keyword">this</span><span class="token punctuation">.</span>masterRegistryClient<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è´Ÿè´£å·¥ä½œæµå®ä¾‹ä¸­çš„çŠ¶æ€å˜åŒ–</span></span>
<span class="line"><span class="token keyword">this</span><span class="token punctuation">.</span>eventExecuteService<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æ‰«æçº¿ç¨‹ï¼Œå®šæ—¶æ‰«ææ•°æ®åº“ä¸­çš„çš„commandè¡¨ï¼Œå¹¶å¯åŠ¨StateWheelExecuteThreadã€ WorkflowExecuteThread </span></span>
<span class="line"><span class="token keyword">this</span><span class="token punctuation">.</span>masterSchedulerService<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®¹é”™æ¢å¤çº¿ç¨‹ï¼ŒæŸ¥æ‰¾æœªæˆåŠŸçš„ä»»åŠ¡ ä¸”è°ƒåº¦è€…ä¸ºè‡ªèº«æˆ–å·²ç»æŒ‚æ‰çš„èŠ‚ç‚¹æ•°æ®ï¼Œå¯¹å¤±è´¥ä»»åŠ¡è¿›è¡Œé‡æ–°å¤„ç†</span></span>
<span class="line"><span class="token keyword">this</span><span class="token punctuation">.</span>failoverExecuteThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// quartz å¯åŠ¨</span></span>
<span class="line"><span class="token class-name">QuartzExecutors</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h5 id="workerserver" tabindex="-1"><a class="header-anchor" href="#workerserver"><span>WorkerServer</span></a></h5><blockquote><ul><li><p>WorkerServerä¹Ÿé‡‡ç”¨åˆ†å¸ƒå¼æ— ä¸­å¿ƒè®¾è®¡ç†å¿µï¼ŒæœåŠ¡å¯åŠ¨æ—¶å‘Zookeeperæ³¨å†Œä¸´æ—¶èŠ‚ç‚¹ï¼›</p></li><li><p>æ¥æ”¶<code>MasterServer</code>è°ƒåº¦è¯·æ±‚ï¼Œè¿›è¡Œä»»åŠ¡æ‰§è¡Œï¼ˆæ‰€ä»¥wokeræ‰€åœ¨æœåŠ¡ï¼Œéœ€è¦å‡†å¤‡å¥½ä»»åŠ¡æ‰§è¡Œæ‰€éœ€çš„å„ç§ç¯å¢ƒï¼Œæ¯”å¦‚sparkã€flinkï¼‰ï¼›å¹¶å“åº”æ‰§è¡Œç»“æœ</p></li></ul><p><strong>åŒ…å«æœåŠ¡</strong></p><ul><li><strong>WorkerManagerThread</strong>ä¸»è¦é€šè¿‡nettyé¢†å–masterå‘é€è¿‡æ¥çš„ä»»åŠ¡ï¼Œå¹¶æ ¹æ®ä¸åŒä»»åŠ¡ç±»å‹è°ƒç”¨<strong>TaskExecuteThread</strong>å¯¹åº”æ‰§è¡Œå™¨ã€‚</li><li><strong>RetryReportTaskStatusThread</strong>ä¸»è¦é€šè¿‡nettyå‘masteræ±‡æŠ¥ä»»åŠ¡çŠ¶æ€</li></ul><p><strong>æºç è§£æï¼š</strong></p><p><strong>å…¥å£æ–¹æ³•</strong>ï¼š<code>org.apache.dolphinscheduler.server.worker.WorkerServer#run</code></p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token comment">// spring beanå®ä¾‹åŒ–åï¼Œè°ƒç”¨çš„åˆå§‹åŒ–æ–¹æ³•</span></span>
<span class="line"><span class="token annotation punctuation">@PostConstruct</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"> </span>
<span class="line"> <span class="token comment">// å¯åŠ¨nettyServerï¼Œå¹¶</span></span>
<span class="line"> <span class="token keyword">this</span><span class="token punctuation">.</span>nettyRemotingServer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> <span class="token comment">// æ³¨å†Œzk</span></span>
<span class="line"> <span class="token keyword">this</span><span class="token punctuation">.</span>workerRegistryClient<span class="token punctuation">.</span><span class="token function">registry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> <span class="token comment">// å¯åŠ¨workerå¤„ç†çº¿ç¨‹</span></span>
<span class="line"> <span class="token keyword">this</span><span class="token punctuation">.</span>workerManagerThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> <span class="token comment">// å‘masterå‘é€ä»»åŠ¡çŠ¶æ€</span></span>
<span class="line"> <span class="token keyword">this</span><span class="token punctuation">.</span>retryReportTaskStatusThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h5 id="alert" tabindex="-1"><a class="header-anchor" href="#alert"><span>Alert</span></a></h5><blockquote><ul><li>å‘Šè­¦ç®¡ç†ï¼ŒæŸ¥è¯¢æ•°æ®åº“ä¸­éœ€è¦å‘Šè­¦çš„æ•°æ®ï¼Œè¿›è¡Œå‘é€</li><li>sql ç±»å‹ä»»åŠ¡ï¼Œå‘é€é‚®ä»¶ä¹Ÿä¼šé€šè¿‡æ­¤æœåŠ¡</li></ul><p>æºç ä»…æ”¯æŒå•æœºæœåŠ¡</p></blockquote><h5 id="loggerserver" tabindex="-1"><a class="header-anchor" href="#loggerserver"><span>LoggerServer</span></a></h5><blockquote><p>æ—¥å¿—æœåŠ¡ï¼Œç»™<code>API</code>æœåŠ¡è°ƒç”¨æŸ¥çœ‹æ—¥å¿—</p></blockquote><h4 id="quartz-æ•´åˆåŸç†" tabindex="-1"><a class="header-anchor" href="#quartz-æ•´åˆåŸç†"><span><code>quartz</code> æ•´åˆåŸç†</span></a></h4><ul><li><code>API</code> æœåŠ¡åœ¨å®šæ—¶ä»»åŠ¡å¯åŠ¨æ—¶ï¼Œä¼šå°†å®šæ—¶ä¿¡æ¯ï¼ŒæŒ‰ç…§<code>quartz</code>éœ€è¦çš„æ ¼å¼ï¼Œæ’å…¥åˆ°æ•°æ®åº“ä¸­</li><li><code>quartz</code> å®šæ—¶è§¦å‘æ—¶ï¼Œ<code>org.apache.dolphinscheduler.service.quartz.ProcessScheduleJob</code>ç±»ï¼Œä¼šå°†ä»»åŠ¡ä¿¡æ¯ï¼Œæ’å…¥åˆ°è¡¨ <code>t_ds_command</code></li></ul><h3 id="è¿ç»´" tabindex="-1"><a class="header-anchor" href="#è¿ç»´"><span>è¿ç»´</span></a></h3>`,16)),s("blockquote",null,[s("p",null,[n[13]||(n[13]=a("å‚è€ƒèµ„æ–™ï¼š")),s("a",T,[n[12]||(n[12]=a("è¿ç»´æ‰‹å†Œ")),t(e)])]),n[14]||(n[14]=s("p",null,"æ³¨æ„ï¼šè‹¥éœ€è¦æ”¯æŒ åŠ¨æ€æ‰©å®¹ã€ç¼©å®¹ï¼›éœ€è¦ docker éƒ¨ç½²æ–¹å¼",-1))]),n[32]||(n[32]=s("h3",{id:"äºŒæ¬¡å¼€å‘",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#äºŒæ¬¡å¼€å‘"},[s("span",null,"äºŒæ¬¡å¼€å‘")])],-1)),s("blockquote",null,[s("p",null,[n[16]||(n[16]=a("å‚è€ƒèµ„æ–™ï¼š")),s("a",E,[n[15]||(n[15]=a("å¼€å‘è€…æŒ‡å—")),t(e)])])]),n[33]||(n[33]=s("h4",{id:"æŠ€æœ¯æ ˆ",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#æŠ€æœ¯æ ˆ"},[s("span",null,"æŠ€æœ¯æ ˆ")])],-1)),s("ul",null,[n[19]||(n[19]=s("li",null,"quartzï¼ˆ2.3.0ï¼‰",-1)),n[20]||(n[20]=s("li",null,"mysqlï¼ˆ5.7.13ï¼‰",-1)),n[21]||(n[21]=s("li",null,"springBootï¼ˆ2.5.6ï¼‰",-1)),s("li",null,[s("a",z,[n[17]||(n[17]=a("mybatisPlus")),t(e)]),n[18]||(n[18]=a("ï¼ˆ3.2.0ï¼‰"))]),n[22]||(n[22]=s("li",null,"zookeeper(3.4.6+)",-1)),n[23]||(n[23]=s("li",null,[a("ç»Ÿä¸€èµ„æºç®¡ç† : å…±äº«å­˜å‚¨æ”¯æŒ[ "),s("code",null,"HDFS"),a("ã€"),s("code",null,"S3A"),a("ã€"),s("code",null,"MinIO"),a("]")],-1)),n[24]||(n[24]=s("li",null,"å‰ç«¯ï¼šVUE",-1))]),n[34]||(n[34]=p(`<h4 id="æºç æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#æºç æ¨¡å—"><span>æºç æ¨¡å—</span></a></h4><ul><li>dolphinscheduler-alert å‘Šè­¦æ¨¡å—ï¼Œæä¾› AlertServer æœåŠ¡ã€‚</li><li>dolphinscheduler-api webåº”ç”¨æ¨¡å—ï¼Œæä¾› ApiServer æœåŠ¡ã€‚</li><li>dolphinscheduler-common é€šç”¨çš„å¸¸é‡æšä¸¾ã€å·¥å…·ç±»ã€æ•°æ®ç»“æ„æˆ–è€…åŸºç±»</li><li>dolphinscheduler-dao æä¾›æ•°æ®åº“è®¿é—®ç­‰æ“ä½œã€‚</li><li>dolphinscheduler-remote åŸºäº netty çš„å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯</li><li>dolphinscheduler-server MasterServer å’Œ WorkerServer æœåŠ¡</li><li>dolphinscheduler-service serviceæ¨¡å—ï¼ŒåŒ…å«Quartzã€Zookeeperã€æ—¥å¿—å®¢æˆ·ç«¯è®¿é—®æœåŠ¡ï¼Œä¾¿äºserveræ¨¡å—å’Œapiæ¨¡å—è°ƒç”¨</li><li>dolphinscheduler-ui å‰ç«¯æ¨¡å—</li></ul><h4 id="spiæœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#spiæœºåˆ¶"><span>spiæœºåˆ¶</span></a></h4><blockquote><p>service provider interfaceï¼šjava æä¾›çš„æœåŠ¡å‘ç°æœºåˆ¶</p></blockquote><p><strong>ä¾‹å¦‚ å‘Šè­¦æ’ä»¶çš„æ‰©å±•ï¼š</strong></p><blockquote><p>1ã€é¡¹ç›®å¯åŠ¨æ—¶ï¼Œä¼šæ‰¾åˆ°æ‰€æœ‰å‘Šè­¦æ’ä»¶ï¼Œæ’å…¥åˆ°æ•°æ®åº“ä¸­</p><p>2ã€å‘Šè­¦å‘é€æ—¶ï¼Œæ ¹æ®é…ç½®çš„å‘Šè­¦ç±»å‹ï¼Œæ‰¾åˆ°å®ç°ç±»è¿›è¡Œå‘é€</p></blockquote><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre class="language-java"><code><span class="line"><span class="token comment">// å‘Šè­¦æ¸ é“å·¥å‚ æ¥å£ç±»</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AlertChannelFactory</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token class-name">AlertChannel</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">     * Returns the configurable parameters that this plugin needs to display on the web ui</span>
<span class="line">     */</span></span>
<span class="line">    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PluginParams</span><span class="token punctuation">&gt;</span></span> <span class="token function">params</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å‘Šè­¦æ¸ é“å‘é€æ¥å£</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AlertChannel</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">AlertResult</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">AlertInfo</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// http å‘é€å·¥å‚</span></span>
<span class="line"><span class="token comment">// @AutoService æ˜¯googleæä¾›çš„ä¾¿æ·spiæ–¹å¼ï¼Œç±»ä¼¼lombok;</span></span>
<span class="line"><span class="token comment">// ç¼–è¯‘ååœ¨ç›®å½•ï¼štarget/classes/META-INF/services/org.apache.dolphinscheduler.alert.api.AlertChannelFactory æ–‡ä»¶</span></span>
<span class="line"><span class="token annotation punctuation">@AutoService</span><span class="token punctuation">(</span><span class="token class-name">AlertChannelFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">HttpAlertChannelFactory</span> <span class="token keyword">implements</span> <span class="token class-name">AlertChannelFactory</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token string">&quot;Http&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PluginParams</span><span class="token punctuation">&gt;</span></span> <span class="token function">params</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">       <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">AlertChannel</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HttpAlertChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// http å‘é€å®ç°ç±»</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">HttpAlertChannel</span> <span class="token keyword">implements</span> <span class="token class-name">AlertChannel</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">AlertResult</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">AlertInfo</span> alertInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">AlertData</span> alertData <span class="token operator">=</span> alertInfo<span class="token punctuation">.</span><span class="token function">getAlertData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> paramsMap <span class="token operator">=</span> alertInfo<span class="token punctuation">.</span><span class="token function">getAlertParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> paramsMap<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AlertResult</span><span class="token punctuation">(</span><span class="token string">&quot;false&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http params is null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HttpSender</span><span class="token punctuation">(</span>paramsMap<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>alertData<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®è·µ" tabindex="-1"><a class="header-anchor" href="#å®è·µ"><span>å®è·µ</span></a></h3><blockquote><p><strong>ADTå¦‚ä½•åº”ç”¨ï¼Ÿ</strong>ï¼ˆè¿˜æ²¡æœ‰å®ç°ï¼‰</p><ul><li>HTTPè°ƒåº¦æœåŠ¡ï¼šç‰¹ç‚¹ï¼šéœ€è¦é€šè¿‡ <code>å¾®æœåŠ¡åç§°</code>æ–¹å¼è°ƒç”¨ï¼ˆä¸ç›´æ¥ä½¿ç”¨åŸŸåï¼‰</li></ul></blockquote><ul><li>ç°æœ‰æ–¹å¼ï¼šä½¿ç”¨çš„<code>quartz</code>æ¡†æ¶ï¼Œå¹¶ä¸”æ³¨å†Œè‡³æ³¨å†Œä¸­å¿ƒï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡æœåŠ¡åç§°è¿›è¡Œè°ƒç”¨</li></ul><blockquote><ul><li>DSæ–¹å¼ï¼šéœ€è¦å¢åŠ ä¸€ä¸ªèƒ½å¤Ÿè°ƒç”¨å¾®æœåŠ¡æ¥å£çš„æ¡¥æ¢æ¥å£ï¼ŒDSæºå¸¦çœŸå®è¯·æ±‚è·¯å¾„è®¿é—®ä¸­é—´æ¥å£ï¼Œæ¡¥æ¢æ¥å£è½¬å‘çœŸå®è°ƒç”¨è¯·æ±‚</li><li><strong>å½’å› å¼•æ“</strong>ï¼šç‰¹ç‚¹ï¼š<code>æœ‰åºçš„ 3 ä¸ª flink</code>ä»»åŠ¡</li></ul></blockquote><ul><li>ç°æœ‰æ–¹å¼ï¼š3ä¸ªjenkinsä»»åŠ¡ä½¿ç”¨ shell è„šæœ¬ å»è°ƒç”¨flinkä»»åŠ¡ï¼Œjavaä»£ç  å‘èµ· jenkinsï¼Œå¹¶è½®è¯¢è·å–jenkinsæ‰§è¡ŒçŠ¶æ€ï¼Œç¬¬ä¸€ä¸ªæˆåŠŸåï¼Œå‘èµ·ç¬¬äºŒä¸ªä»»åŠ¡è°ƒç”¨ï¼Œä¾æ¬¡è°ƒç”¨å®Œæˆ</li></ul><blockquote><ul><li>DSæ–¹å¼ï¼š</li></ul></blockquote><ul><li>å®šä¹‰flinkä»»åŠ¡æ‰§è¡Œçš„ dagå›¾ï¼Œflink ä»»åŠ¡æ‰§è¡Œç»“æŸåï¼Œå¢åŠ  Httpä»»åŠ¡èŠ‚ç‚¹ï¼ˆå¯ä»¥æ£€éªŒè¿”å›å€¼ï¼Œä¿è¯ç¨³å®šè°ƒç”¨æˆåŠŸï¼‰ï¼Œæˆ–è€…è¿æ¥æ•°æ®åº“ç›´æ¥æ›´æ–°æ•°æ®çš„çŠ¶æ€</li></ul><blockquote><pre><code>- javaä»£ç  è°ƒç”¨ DSçš„æ¥å£ï¼Œå‘èµ·ä»»åŠ¡è°ƒç”¨
</code></pre></blockquote><h3 id="faq" tabindex="-1"><a class="header-anchor" href="#faq"><span>FAQ</span></a></h3><p>https://dolphinscheduler.apache.org/zh-cn/docs/release/faq.html</p><h3 id="å…¶ä»–èµ„æ–™" tabindex="-1"><a class="header-anchor" href="#å…¶ä»–èµ„æ–™"><span>å…¶ä»–èµ„æ–™ï¼š</span></a></h3><p><img src="`+g+'" alt="image-20220210081901024"></p><p><img src="'+x+'" alt="image-20220210082252183"></p><h2 id="å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#å¯¹æ¯”"><span>å¯¹æ¯”</span></a></h2><table><thead><tr><th></th><th>xxl-job</th><th>elastic-job</th><th>quzrtz</th><th>dolphinscheduler</th></tr></thead><tbody><tr><td>é›†ç¾¤ä¾èµ–</td><td>mysql</td><td>zookeeper</td><td>mysql</td><td>mysqlã€zookeeper</td></tr><tr><td>åŠ¨æ€æ‰©å®¹</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>masterã€workeræ”¯æŒ</td></tr><tr><td>ä»»åŠ¡åˆ†ç‰‡ï¼Œå¹¶è¡Œå¤„ç†</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td></td><td>ä¸æ”¯æŒ</td></tr><tr><td>ç®¡ç†ç•Œé¢</td><td>éå¸¸å®Œå–„</td><td>å®Œå–„ï¼Œéœ€è¦å•ç‹¬éƒ¨ç½²é¡¹ç›®ï¼Œ ä½†æ˜¯å¦‚æœéœ€è¦æ–°å¢åŠ å®šæ—¶ä»»åŠ¡ï¼Œéœ€è¦äºŒæ¬¡å¼€å‘</td><td></td><td>éå¸¸å®Œå–„</td></tr><tr><td>æ—¥å¿—è¿½æº¯</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td></td><td>æ”¯æŒ</td></tr><tr><td>ä»»åŠ¡å¤±è´¥å¤„ç†ç­–ç•¥</td><td>å†…ç½®é‚®ä»¶å‘Šè­¦ï¼Œ å¯è½»æ˜“æ‰©å±•å…¶ä»–å‘Šè­¦æ–¹å¼ï¼Œå¦‚ï¼šé’‰é’‰ã€ä¼ä¸šå¾®ä¿¡</td><td>å†…ç½®ï¼šé‚®ä»¶ã€ä¼ä¸šå¾®ä¿¡ã€é’‰é’‰</td><td></td><td>å†…ç½®ï¼šé‚®ä»¶ã€ä¼ä¸šå¾®ä¿¡ã€é’‰é’‰ã€é£ä¹¦ã€http......<br>ä¸”æ”¯æŒæ‰©å±•</td></tr><tr><td>é›†æˆå›°éš¾åº¦</td><td>ç®€å•</td><td>ç®€å•</td><td>ç®€å•</td><td>ç•¥å¤æ‚</td></tr><tr><td>æ”¯æŒDAG</td><td>ä¸æ”¯æŒï¼Œæœªæ¥è®¡åˆ’æ”¯æŒ</td><td>ä¸æ”¯æŒï¼Œæœªæ¥è®¡åˆ’æ”¯æŒ</td><td></td><td>æ”¯æŒ</td></tr></tbody></table><h2 id="é€‰æ‹©" tabindex="-1"><a class="header-anchor" href="#é€‰æ‹©"><span>é€‰æ‹©</span></a></h2><p>ä¸€å®šè¦æŒ‰ç…§å®é™…éœ€æ±‚</p><ul><li>åŸºç¡€ä¸šåŠ¡è°ƒç”¨ï¼Œä¸éœ€è¦<code>dag</code>ï¼›ä¸”å¯¹å¤§æ•°æ®ä»»åŠ¡éœ€æ±‚è¾ƒå°‘ <ul><li>å»ºè®®é€‰æ‹© <code>xxl-job</code></li><li>å› ä¸ºï¼šåŸºç¡€åŠŸèƒ½å¼ºå¤§ï¼Œç®€å•æ˜“ç”¨ï¼Œç¯å¢ƒä¾èµ–ï¼Œæ¶æ„ç®€å•ï¼Œæ˜“ç»´æŠ¤</li></ul></li><li>elseï¼š <ul><li>é€‰æ‹©<code>Dolphinscheduler</code></li></ul></li></ul>',25))])}const R=l(f,[["render",D],["__file","scheduler.html.vue"]]),I=JSON.parse('{"path":"/blogs/jishu/scheduler/scheduler.html","title":"åˆ†å¸ƒå¼è°ƒåº¦æ¡†æ¶è°ƒç ”","lang":"en-US","frontmatter":{"title":"åˆ†å¸ƒå¼è°ƒåº¦æ¡†æ¶è°ƒç ”","date":"2022-09-02T00:00:00.000Z","author":"shuiMu","categories":["æŠ€æœ¯"],"tags":["quartz","dolphinScheduler","xxl-job"]},"headers":[{"level":2,"title":"quartz","slug":"quartz","link":"#quartz","children":[{"level":3,"title":"æ¶æ„å›¾","slug":"æ¶æ„å›¾","link":"#æ¶æ„å›¾","children":[]},{"level":3,"title":"è°ƒåº¦åŸç†","slug":"è°ƒåº¦åŸç†","link":"#è°ƒåº¦åŸç†","children":[]},{"level":3,"title":"è°ƒåº¦æºç ","slug":"è°ƒåº¦æºç ","link":"#è°ƒåº¦æºç ","children":[]}]},{"level":2,"title":"elastic-job","slug":"elastic-job","link":"#elastic-job","children":[{"level":3,"title":"æ¶æ„å›¾","slug":"æ¶æ„å›¾-1","link":"#æ¶æ„å›¾-1","children":[]},{"level":3,"title":"è°ƒåº¦åŸç†","slug":"è°ƒåº¦åŸç†-1","link":"#è°ƒåº¦åŸç†-1","children":[]},{"level":3,"title":"é›†æˆæ–¹å¼ï¼š","slug":"é›†æˆæ–¹å¼","link":"#é›†æˆæ–¹å¼","children":[]},{"level":3,"title":"è°ƒåº¦æºç ","slug":"è°ƒåº¦æºç -1","link":"#è°ƒåº¦æºç -1","children":[]}]},{"level":2,"title":"xxl-job","slug":"xxl-job","link":"#xxl-job","children":[{"level":3,"title":"æ¶æ„å›¾","slug":"æ¶æ„å›¾-2","link":"#æ¶æ„å›¾-2","children":[]},{"level":3,"title":"è°ƒåº¦åŸç†","slug":"è°ƒåº¦åŸç†-2","link":"#è°ƒåº¦åŸç†-2","children":[]},{"level":3,"title":"é›†æˆæ–¹å¼","slug":"é›†æˆæ–¹å¼-1","link":"#é›†æˆæ–¹å¼-1","children":[]},{"level":3,"title":"Admin è°ƒåº¦æºç ","slug":"admin-è°ƒåº¦æºç ","link":"#admin-è°ƒåº¦æºç ","children":[]}]},{"level":2,"title":"DolphinScheduler","slug":"dolphinscheduler","link":"#dolphinscheduler","children":[{"level":3,"title":"ç®€ä»‹","slug":"ç®€ä»‹","link":"#ç®€ä»‹","children":[]},{"level":3,"title":"åŠŸèƒ½ä»‹ç»","slug":"åŠŸèƒ½ä»‹ç»","link":"#åŠŸèƒ½ä»‹ç»","children":[]},{"level":3,"title":"æ¶æ„è®¾è®¡","slug":"æ¶æ„è®¾è®¡","link":"#æ¶æ„è®¾è®¡","children":[]},{"level":3,"title":"è¿ç»´","slug":"è¿ç»´","link":"#è¿ç»´","children":[]},{"level":3,"title":"äºŒæ¬¡å¼€å‘","slug":"äºŒæ¬¡å¼€å‘","link":"#äºŒæ¬¡å¼€å‘","children":[]},{"level":3,"title":"å®è·µ","slug":"å®è·µ","link":"#å®è·µ","children":[]},{"level":3,"title":"FAQ","slug":"faq","link":"#faq","children":[]},{"level":3,"title":"å…¶ä»–èµ„æ–™ï¼š","slug":"å…¶ä»–èµ„æ–™","link":"#å…¶ä»–èµ„æ–™","children":[]}]},{"level":2,"title":"å¯¹æ¯”","slug":"å¯¹æ¯”","link":"#å¯¹æ¯”","children":[]},{"level":2,"title":"é€‰æ‹©","slug":"é€‰æ‹©","link":"#é€‰æ‹©","children":[]}],"git":{"createdTime":1729153375000,"updatedTime":1729235013000,"contributors":[{"name":"peng.li","email":"lip.app@qq.com","commits":1}]},"filePathRelative":"blogs/æŠ€æœ¯/scheduler/scheduler.md"}');export{R as comp,I as data};
